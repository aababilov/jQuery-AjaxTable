(function(b){var e={init:function(a){function e(){i.children("thead").children("tr").children("th").unbind("click");c.beforeUpdate&&c.beforeUpdate();i.each(function(){var a=this;b.get(g.url,function(k){var h=b(a).children("tbody");h.html("");b("#"+g.template).tmpl(k).appendTo(h);c.afterUpdate&&c.afterUpdate();g.sortable&&(h=!0,g.cacheable&&(h=!1),m(h,k),i.children("thead").children("tr").children("th.sorted-asc").each(function(){j(b(this).attr("sortOrder"),b(this).attr("key"))}),i.children("thead").children("tr").children("th.sorted-desc").each(function(){j(b(this).attr("sortOrder"),
b(this).attr("key"))}))})})}var g={template:"ajax_table_template",url:"",autoUpdate:!0,interval:5E3,beforeUpdate:null,afterUpdate:null,sortable:!1,cacheable:!1};a&&b.extend(g,a);var a=b(this),c=a.data("ajaxTable");c||(b(this).data("ajaxTable",{timers:{},beforeUpdate:g.beforeUpdate,afterUpdate:g.afterUpdate,cachedData:null}),c=a.data("ajaxTable"));var i=this,n=function(b,a,h){for(var d=0;d<b.length;d++){var f=b[d],c;for(c in f)if(c==h&&f[c]==a)return f}return null},j=function(a,k){var h=[];if(c.cachedData){for(var d=
[],f=0;f<c.cachedData.length;f++){var e=c.cachedData[f],j=null,l;for(l in e)l==k&&(j=e[l]);d.push(j)}d=d.sort();a=="desc"&&(d=d.reverse());for(f=0;f<d.length;f++)e=n(c.cachedData,d[f],k),h.push(e)}i.each(function(){var a=b(this).children("tbody");a.html("");b("#"+g.template).tmpl(h).appendTo(a)})},m=function(a,e){i.each(function(){b(this).children("thead").children("tr").children("th").click(function(){var a=b(this),d=a.attr("sortOrder"),d=d?d=="asc"?"desc":"asc":"asc",c=i.children("thead").children("tr").children("th");
c.removeAttr("sortOrder");c.removeClass("sorted-asc sorted-desc");a.attr("sortOrder",d);a.addClass("sorted-"+d);j(d,a.attr("key"))})});c.cachedData=e};e();g.autoUpdate&&!c.timers[this.selector]&&(c.timers[this.selector]=window.setInterval(e,g.interval))},stop:function(){var a=b(this).data("ajaxTable");a&&(window.clearInterval(a.timers[this.selector]),a.timers[this.selector]=null)}};b.fn.ajaxTable=function(a){if(e[a])return e[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a===
"object"||!a)return e.init.apply(this,arguments);else b.error("Method "+a+" does not exist on jQuery.tooltip")}})(jQuery);