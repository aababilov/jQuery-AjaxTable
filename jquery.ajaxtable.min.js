(function(c){var e={init:function(a){function e(){i.children("thead").children("tr").children("th").unbind("click");b.beforeUpdate&&b.beforeUpdate();i.each(function(){var a=this;c.get(g.url,function(k){var h=c(a).children("tbody");h.html("");c("#"+g.template).tmpl(k).appendTo(h);b.afterUpdate&&b.afterUpdate();g.sortable&&(h=!0,g.cacheable&&(h=!1),m(h,k),i.children("thead").children("tr").children("th.sorted-asc").each(function(){j(c(this).attr("sortOrder"),c(this).attr("key"))}),i.children("thead").children("tr").children("th.sorted-desc").each(function(){j(c(this).attr("sortOrder"),
c(this).attr("key"))}))})})}var g={template:"ajax_table_template",url:"",autoUpdate:!0,interval:5E3,beforeUpdate:null,afterUpdate:null,sortable:!1,cacheable:!1};a&&c.extend(g,a);var a=c(this),b=a.data("ajaxTable");b||(c(this).data("ajaxTable",{timers:{},beforeUpdate:g.beforeUpdate,afterUpdate:g.afterUpdate,cachedData:null}),b=a.data("ajaxTable"));var i=this,n=function(c,a,h){for(var d=0;d<c.length;d++){var f=c[d],b;for(b in f)if(b==h&&f[b]==a)return f}return null},j=function(a,k){var h=[];if(b.cachedData){for(var d=
[],f=0;f<b.cachedData.length;f++){var e=b.cachedData[f],j=null,l;for(l in e)l==k&&(j=e[l]);d.push(j)}d=d.sort();a=="desc"&&(d=d.reverse());for(f=0;f<d.length;f++)e=n(b.cachedData,d[f],k),h.push(e)}i.each(function(){var a=c(this).children("tbody");a.html("");c("#"+g.template).tmpl(h).appendTo(a)})},m=function(a,e){i.each(function(){c(this).children("thead").children("tr").children("th").click(function(){var a=c(this),d=a.attr("sortOrder"),d=d?d=="asc"?"desc":"asc":"asc",b=i.children("thead").children("tr").children("th");
b.removeAttr("sortOrder");b.removeClass("sorted-asc");b.removeClass("sorted-desc");a.attr("sortOrder",d);a.addClass("sorted-"+d);j(d,a.attr("key"))})});b.cachedData=e};e();g.autoUpdate&&!b.timers[this.selector]&&(b.timers[this.selector]=window.setInterval(e,g.interval))},stop:function(){var a=c(this).data("ajaxTable");a&&(window.clearInterval(a.timers[this.selector]),a.timers[this.selector]=null)}};c.fn.ajaxTable=function(a){if(e[a])return e[a].apply(this,Array.prototype.slice.call(arguments,1));
else if(typeof a==="object"||!a)return e.init.apply(this,arguments);else c.error("Method "+a+" does not exist on jQuery.tooltip")}})(jQuery);